/* map.css - マップ・イベント・報酬 */

/* マップ画面 */
#map-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* 単色の代わりに画像を指定 */
    background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url("../resource/map_bg.jpg");
    background-size: cover;
    background-position: center;
    background-attachment: fixed; /* 背景を固定して、ノードだけが動くようにする */
    z-index: 500;
    overflow: hidden;
    display: none;
    flex-direction: column;
    align-items: center;
}
#map-header { width: 100%; padding: 10px; background: rgba(0,0,0,0.5); color: white; text-align: center; font-size: 20px; font-weight: bold; z-index: 510; box-shadow: 0 2px 5px rgba(0,0,0,0.5); }

/* マップ本体（スクロール領域）統合済み */
#map-scroll-area {
    flex: 1; width: 100%; max-width: 600px;
    overflow-y: auto; position: relative;
    padding: 100px 0 50px 0; display: flex; flex-direction: column; align-items: center;
    gap: 40px; scrollbar-width: none; -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
}
#map-scroll-area::-webkit-scrollbar { display: none; }

.map-floor { display: flex; justify-content: center; gap: 30px; width: 100%; position: relative; }
.map-node { width: 50px; height: 50px; border-radius: 50%; border: 3px solid #7f8c8d; background-color: #34495e; display: flex; justify-content: center; align-items: center; font-size: 24px; color: #bdc3c7; cursor: default; position: relative; transition: all 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.3); z-index: 2; backdrop-filter: blur(2px);}
.node-selectable { border-color: #f1c40f; background-color: #fff; cursor: pointer; animation: pulse-node 1.5s infinite; }
.node-selectable:hover { transform: scale(1.2); box-shadow: 0 0 15px #f1c40f; }
.node-cleared { border-color: #27ae60; background-color: #2ecc71; color: white; opacity: 0.7; }
.node-locked { opacity: 0.85; filter: grayscale(50%); background-color: #2c3e50; border-color: #555; }
.node-boss { width: 70px; height: 70px; border-color: #e74c3c; font-size: 36px; }
#map-lines-svg { position: absolute; top: 0; left: 0; width: 100%; height: auto; pointer-events: none; z-index: 1; }
@keyframes pulse-node { 0% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(241, 196, 15, 0); } 100% { box-shadow: 0 0 0 0 rgba(241, 196, 15, 0); } }

/* 泉イベントモーダル */
#fountain-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; color: white; backdrop-filter: blur(2px); }
.fountain-box { background: linear-gradient(135deg, #2c3e50, #1a252f); border: 3px solid #3498db; border-radius: 15px; padding: 30px; width: 90%; max-width: 400px; text-align: center; box-shadow: 0 0 30px rgba(52, 152, 219, 0.3); animation: popIn 0.3s ease-out; }
@keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
.fountain-icon { font-size: 60px; margin-bottom: 20px; filter: drop-shadow(0 0 10px #3498db); }
.fountain-title { font-size: 24px; font-weight: bold; color: #3498db; margin-bottom: 15px; text-shadow: 0 0 5px rgba(52, 152, 219, 0.5); }
.fountain-desc { font-size: 14px; line-height: 1.6; margin-bottom: 30px; color: #ecf0f1; }
.fountain-buttons { display: flex; justify-content: center; gap: 15px; }
.fountain-btn { padding: 12px 25px; font-size: 16px; font-weight: bold; border: none; border-radius: 25px; cursor: pointer; transition: all 0.2s; min-width: 120px; }
.btn-drink { background: #3498db; color: white; box-shadow: 0 4px 0 #2980b9; }
.btn-drink:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #2980b9; }
.btn-drink:active { transform: translateY(2px); box-shadow: 0 2px 0 #2980b9; }
.btn-leave { background: #95a5a6; color: white; box-shadow: 0 4px 0 #7f8c8d; }
.btn-leave:hover { transform: translateY(-2px); box-shadow: 0 6px 0 #7f8c8d; }
.fountain-result { margin-top: 20px; font-size: 16px; font-weight: bold; min-height: 24px; }
.result-good { color: #2ecc71; }
.result-bad { color: #e74c3c; }

/* 報酬画面 */
#reward-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 600; display: none; flex-direction: column; justify-content: center; align-items: center; color: white; }
.reward-title { font-size: 40px; margin-bottom: 10px; text-shadow: 0 0 10px gold; font-family: 'Times New Roman', serif; }
.reward-card-container { display: flex; gap: 20px; margin-top: 30px; flex-wrap: wrap; justify-content: center; }
.reward-card { width: 160px; height: 220px; background: linear-gradient(135deg, #34495e, #2c3e50); border: 2px solid #7f8c8d; border-radius: 10px; padding: 15px; display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; transition: all 0.2s; box-shadow: 0 5px 15px rgba(0,0,0,0.5); position: relative; overflow: hidden; }
.reward-card:hover { transform: translateY(-10px) scale(1.05); border-color: #f1c40f; box-shadow: 0 0 20px rgba(241, 196, 15, 0.4); background: linear-gradient(135deg, #3e5871, #34495e); }
.reward-icon { font-size: 50px; margin-bottom: 15px; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
.reward-name { font-weight: bold; font-size: 16px; margin-bottom: 10px; color: #ecf0f1; }
.reward-desc { font-size: 12px; color: #bdc3c7; line-height: 1.4; }